  - resource: https://raw.githubusercontent.com/martinju/stromstotte/master/data/current_estimated_compensation.json
    scan_interval: 3600
    headers:
      Content-Type: application/json
      User-Agent: Home Assistant REST sensor
    sensor:
      - name: forecast_monthly_electricity_compensation_mean
        icon: mdi:cash-plus
        # NO1=$[1], NO2=$[16], NO3=$[31], NO41=$[46], NO5=$[61]
        json_attributes_path: "$[61]"
        json_attributes:
          - area
          - mean_price
          - compensation
          - type
          - estimation_date
          - computation_year
          - computation_month
        value_template: "{{ value_json | selectattr('area', 'match', 'NO5') | selectattr('type', 'match', 'mean') | map(attribute='compensation') | first | round (2) }}"
        unit_of_measurement: "NOK/kWh"
      - name: forecast_monthly_electricity_compensation_median
        icon: mdi:cash-plus
        # NO1=$[2], NO2=$[17], NO3=$[32], NO41=$[47], NO5=$[62]
        json_attributes_path: "$[62]"
        json_attributes:
          - area
          - mean_price
          - compensation
          - type
          - estimation_date
          - computation_year
          - computation_month
        value_template: "{{ value_json | selectattr('area', 'match', 'NO5') | selectattr('type', 'match', 'median') | map(attribute='compensation') | first | round (2) }}"
        unit_of_measurement: "NOK/kWh"
      - name: forecast_monthly_electricity_compensation_quantile_0.025
        icon: mdi:cash-plus
        # NO1=$[4], NO2=$[19], NO3=$[34], NO41=$[49], NO5=$[64]
        json_attributes_path: "$[64]"
        json_attributes:
          - area
          - mean_price
          - compensation
          - type
          - estimation_date
          - computation_year
          - computation_month
        value_template: "{{ value_json | selectattr('area', 'match', 'NO5') | selectattr('type', 'match', 'quantile_0.025') | map(attribute='compensation') | first | round (2) }}"
        unit_of_measurement: "NOK/kWh"
      - name: forecast_monthly_electricity_compensation_quantile_0.975
        icon: mdi:cash-plus
        # NO1=$[11], NO2=$[26], NO3=$[41], NO41=$[56], NO5=$[71]
        json_attributes_path: "$[71]"
        json_attributes:
          - area
          - mean_price
          - compensation
          - type
          - estimation_date
          - computation_year
          - computation_month
        value_template: "{{ value_json | selectattr('area', 'match', 'NO5') | selectattr('type', 'match', 'quantile_0.975') | map(attribute='compensation') | first | round (2) }}"
        unit_of_measurement: "NOK/kWh"
      - name: forecast_monthly_electricity_compensation_lower_bound
        icon: mdi:cash-plus
        # NO1=$[13], NO2=$[28], NO3=$[43], NO41=$[58], NO5=$[73]
        json_attributes_path: "$[73]"
        json_attributes:
          - area
          - mean_price
          - compensation
          - type
          - estimation_date
          - computation_year
          - computation_month
        value_template: "{{ value_json | selectattr('area', 'match', 'NO5') | selectattr('type', 'match', 'lower_bound') | map(attribute='compensation') | first | round (2) }}"
        unit_of_measurement: "NOK/kWh"
      - name: forecast_monthly_electricity_compensation_current_mean
        icon: mdi:cash-plus
        # NO1=$[14], NO2=$[29], NO3=$[44], NO41=$[59], NO5=$[74]
        json_attributes_path: "$[74]"
        json_attributes:
          - area
          - mean_price
          - compensation
          - type
          - estimation_date
          - computation_year
          - computation_month
        value_template: "{{ value_json | selectattr('area', 'match', 'NO5') | selectattr('type', 'match', 'current_mean') | map(attribute='compensation') | first | round (2) }}"
        unit_of_measurement: "NOK/kWh"


